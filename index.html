<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MoonLith Studio - خدمات التصميم</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
<script>
(function() {
emailjs.init("jDE8nQ7KU9m4EJNo7");
})();
</script>
<style>
:root {
--primary: #9333EA; /* بنفسجي فاتح */
--primary-dark: #7E22CE; /* بنفسجي غامق */
--secondary: #A855F7;
--background: #F3E8FF;
--text: #1F2937;
--card-bg: #FFFFFF;
--success: #10B981;
}

body {
background: var(--background);
font-family: 'Tajawal', sans-serif;
color: var(--text);
line-height: 1.6;
}

.navbar {
background: var(--primary) !important;
box-shadow: 0 2px 10px rgba(147, 51, 234, 0.2);
padding: 15px 0;
}

.navbar-brand {
font-weight: 700;
font-size: 1.5rem;
color: #fff !important;
}

.hero {
background: linear-gradient(135deg, var(--primary), var(--primary-dark));
padding: 70px 0;
color: white;
text-align: center;
margin-bottom: 30px;
}

.hero h1 {
font-weight: 700;
font-size: 2.5rem;
margin-bottom: 15px;
}

.card {
background: var(--card-bg);
border: none;
border-radius: 15px;
padding: 25px;
margin: 15px 0;
box-shadow: 0 4px 15px rgba(147, 51, 234, 0.1);
transition: transform 0.3s ease;
}

.card:hover {
transform: translateY(-5px);
}

.badge-custom {
position: absolute;
top: 15px;
right: 15px;
padding: 8px 20px;
border-radius: 20px;
font-weight: 500;
}

.features-list {
list-style: none;
padding: 0;
margin: 20px 0;
}

.features-list li {
margin: 12px 0;
display: flex;
align-items: center;
}

.features-list i {
margin-left: 10px;
color: var(--success);
}

.btn-custom {
background: var(--primary);
color: white;
border: none;
padding: 12px 25px;
border-radius: 8px;
font-weight: 600;
transition: all 0.3s ease;
width: 100%;
}

.btn-custom:hover {
background: var(--primary-dark);
transform: translateY(-2px);
color: white;
}

.price {
font-size: 28px;
font-weight: 700;
color: var(--primary);
margin: 20px 0;
}

.modal-content {
border-radius: 15px;
border: none;
}

.modal-header {
background: var(--primary);
color: white;
border-radius: 15px 15px 0 0;
}

.form-control {
padding: 12px;
border-radius: 8px;
border: 1px solid #E5E7EB;
}

.form-control:focus {
border-color: var(--primary);
box-shadow: 0 0 0 3px rgba(147, 51, 234, 0.1);
}

.btn-close-white {
filter: brightness(0) invert(1);
}

.invoice-container {
background: white;
border-radius: 15px;
padding: 20px;
box-shadow: 0 4px 15px rgba(147, 51, 234, 0.1);
}

.modal-title {
color: white;
font-weight: 600;
}
</style>
</head>
<body>
<nav class="navbar navbar-dark">
<div class="container">
<span class="navbar-brand">
<i class="fas fa-moon"></i> MoonLith Studio
</span>
</div>
</nav>

<div class="hero">
<div class="container">
<h1>خدمات التصميم الاحترافية</h1>
<p>نقدم أفضل خدمات التصميم بأسعار مناسبة</p>
</div>
</div>

<div class="container">
<div class="row">
<!-- باقة مجانية -->
<div class="col-md-3">
<div class="card text-center">
<span class="badge-custom bg-success">مجاني</span>
<h3>تصميم مجاني</h3>
<div class="price">$0</div>
<ul class="features-list">
<li><i class="fas fa-check"></i>تصميم بسيط</li>
<li><i class="fas fa-check"></i>تعديل واحد فقط</li>
<li><i class="fas fa-clock"></i>متاح كل 3 أيام</li>
</ul>
<button onclick="createOrder('free')" class="btn-custom">طلب الآن</button>
</div>
</div>

<!-- باقة 10M -->
<div class="col-md-3">
<div class="card text-center">
<span class="badge-custom" style="background: var(--primary)">10M كريدت</span>
<h3>باقة ستارت</h3>
<div class="price">$5</div>

<ul class="features-list">
<li><i class="fas fa-check"></i>10M كريدت</li>
<li><i class="fas fa-check"></i>تصميم احترافي</li>
<li><i class="fas fa-check"></i>تعديلين مجاناً</li>
</ul>
<button onclick="createOrder('10m')" class="btn-custom">طلب الآن</button>
</div>
</div>

<!-- باقة 50M -->
<div class="col-md-3">
<div class="card text-center">
<span class="badge-custom" style="background: var(--primary)">50M كريدت</span>
<h3>باقة برو</h3>
<div class="price">$20</div>
<ul class="features-list">
<li><i class="fas fa-check"></i>50M كريدت</li>
<li><i class="fas fa-check"></i>تصميم احترافي مميز</li>
<li><i class="fas fa-check"></i>تعديلات غير محدودة</li>
</ul>
<button onclick="createOrder('50m')" class="btn-custom">طلب الآن</button>
</div>
</div>

<!-- باقة 100M -->
<div class="col-md-3">
<div class="card text-center">
<span class="badge-custom" style="background: var(--primary)">100M كريدت</span>
<h3>باقة بريميوم</h3>
<div class="price">$35</div>
<ul class="features-list">
<li><i class="fas fa-check"></i>100M كريدت</li>
<li><i class="fas fa-check"></i>تصميم احترافي خاص</li>
<li><i class="fas fa-check"></i>تعديلات غير محدودة</li>
</ul>
<button onclick="createOrder('100m')" class="btn-custom">طلب الآن</button>
</div>
</div>
</div>
</div>

<!-- مودال الطلب -->
<div class="modal fade" id="orderModal">
<div class="modal-dialog">
<div class="modal-content">
<div class="modal-header">
<h5 class="modal-title">طلب جديد</h5>
<button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
</div>
<div class="modal-body">
<form id="orderForm">
<input type="hidden" id="packageType" name="packageType">
<div class="mb-3">
<input type="text" class="form-control" name="name" placeholder="الاسم الكامل" required>
</div>
<div class="mb-3">
<input type="email" class="form-control" name="email" placeholder="البريد الإلكتروني" required>
</div>
<div class="mb-3">
<input type="text" class="form-control" name="discord" placeholder="معرف Discord" required>
</div>

<div class="mb-3">
<textarea class="form-control" name="details" rows="4" placeholder="تفاصيل الطلب" required></textarea>
</div>
<button type="submit" class="btn-custom">إرسال الطلب</button>
</form>
</div>
</div>
</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
// دالة إنشاء رقم طلب فريد
function generateOrderNumber() {
return 'ORD-' + Date.now() + Math.floor(Math.random() * 1000);
}

// التحقق من الطلب المجاني
function checkFreeOrderEligibility() {
const lastFreeOrder = localStorage.getItem('lastFreeOrder');
if (lastFreeOrder) {
const timeDiff = Date.now() - parseInt(lastFreeOrder);
const daysDiff = timeDiff / (1000 * 60 * 60 * 24);
return daysDiff >= 3;
}
return true;
}

// حفظ الطلب
function saveOrder(orderData) {
const orders = JSON.parse(localStorage.getItem('orders') || '{}');
orders[orderData.orderNumber] = orderData;
localStorage.setItem('orders', JSON.stringify(orders));
}

// إنشاء طلب جديد
function createOrder(type) {
if (type === 'free' && !checkFreeOrderEligibility()) {
const lastOrder = new Date(parseInt(localStorage.getItem('lastFreeOrder')));
const nextAvailable = new Date(lastOrder.getTime() + (3 * 24 * 60 * 60 * 1000));
Swal.fire({
icon: 'warning',
title: 'عذراً!',
html: `يمكنك طلب تصميم مجاني مرة كل 3 أيام.<br>موعد طلبك القادم: <br>${nextAvailable.toLocaleString('ar-SA')}`,
confirmButtonColor: var(--primary)
});
return;
}
document.getElementById('packageType').value = type;
document.getElementById('orderForm').reset();
new bootstrap.Modal(document.getElementById('orderModal')).show();
}

// معالجة النموذج
document.getElementById('orderForm').onsubmit = async function(e) {
e.preventDefault();
const submitBtn = this.querySelector('button[type="submit"]');
submitBtn.disabled = true;
submitBtn.innerHTML = '<span class="spinner-border spinner-border-sm me-2"></span>جاري الإرسال...';

try {
const formData = new FormData(e.target);
const orderNumber = generateOrderNumber();

const orderData = {
orderNumber,
name: formData.get('name'),
email: formData.get('email'),
discord: formData.get('discord'),
details: formData.get('details'),
package_type: formData.get('packageType'),
date: new Date().toISOString()
};

// حفظ الطلب وإرسال الإيميل
saveOrder(orderData);
if (formData.get('packageType') === 'free') {
localStorage.setItem('lastFreeOrder', Date.now().toString());
}
await emailjs.send("service_l82w2oc", "template_43nya5a", orderData);

// عرض الفاتورة
Swal.fire({
icon: 'success',
title: 'تم إرسال طلبك بنجاح!',
html: `
<div class="invoice-container">
<h3>تفاصيل الطلب #${orderNumber}</h3>
<hr>
<p><strong>الاسم:</strong> ${orderData.name}</p>
<p><strong>الباقة:</strong> ${orderData.package_type}</p>
<p><strong>معرف Discord:</strong> ${orderData.discord}</p>
<p><strong>التاريخ:</strong> ${new Date().toLocaleString('ar-SA')}</p>
<button onclick="editOrder('${orderNumber}')" class="btn-custom">تعديل الطلب</button>
</div>
`,
confirmButtonColor: var(--primary)
});

this.reset();
bootstrap.Modal.getInstance(document.getElementById('orderModal')).hide();

} catch (error) {
Swal.fire({
icon: 'error',
title: 'حدث خطأ!',
text: 'حاول مرة أخرى',
confirmButtonColor: var(--primary)
});
} finally {
submitBtn.disabled = false;
submitBtn.innerHTML = 'إرسال الطلب';
}
};

// دالة تعديل الطلب
function editOrder(orderNumber) {
const orders = JSON.parse(localStorage.getItem('orders') || '{}');
const order = orders[orderNumber];
if (order) {
const form = document.getElementById('orderForm');
form.querySelector('[name="name"]').value = order.name;
form.querySelector('[name="email"]').value = order.email;
form.querySelector('[name="discord"]').value = order.discord;
form.querySelector('[name="details"]').value = order.details;
document.getElementById('packageType').value = order.package_type;
new bootstrap.Modal(document.getElementById('orderModal')).show();
}
}
</script>
</body>
</html>
