
<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SF DESIGNS | تصاميم احترافية</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
    <style>
‎        /* نفس الـ CSS السابق */
    </style>
</head>
<body>
‎    <!-- نفس HTML السابق حتى قبل السكربت -->

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.emailjs.com/sdk/2.3.2/email.min.js"></script>
    <script>
‎        // تهيئة EmailJS
        emailjs.init("service_l82w2oc");

‎        // التحقق من حالة تسجيل الدخول للمشرف
        function checkAdminStatus() {
            if (localStorage.getItem('adminLoggedIn') === 'true') {
                const adminLink = document.createElement('li');
                adminLink.className = 'nav-item';
                adminLink.innerHTML = '<a class="nav-link" href="admin.html"><i class="fas fa-user-shield"></i> لوحة التحكم</a>';
                document.querySelector('.navbar-nav').appendChild(adminLink);
            }
        }

‎        // التمرير إلى قسم الطلب
        function scrollToOrder(package) {
            document.querySelector('select').value = package;
            document.getElementById('order').scrollIntoView({ behavior: 'smooth' });
        }

‎        // إرسال الطلب
        document.getElementById('orderForm').addEventListener('submit', async (e) => {
            e.preventDefault();

            const name = e.target[0].value;
            const discord = e.target[1].value;
            const packageType = e.target[2].value;
            const details = e.target[3].value;

‎            // تحديد سعر وتفاصيل الباقة
            let packageDetails = {
‎                'برونزية': {

price: '10M',
                    features: 'تصميم صورة شخصية + تعديلات مجانية + دقة عالية'
                },
                'فضية': {
                    price: '20M',
                    features: 'بنر سيرفر + صورة شخصية + تعديلات غير محدودة + دقة فائقة'
                },
                'ذهبية': {
                    price: '30M',
                    features: 'تصميم كامل للسيرفر + بنر + صورة شخصية + تصميم 3 رتب'
                }
            }[packageType];

            // تجهيز التاريخ والوقت
            const orderDate = new Date().toLocaleString('ar-SA', {
                timeZone: 'Asia/Riyadh'
            });

            try {
                await emailjs.send("service_l82w2oc", "template_43nya5a", {
                    to_name: "SF DESIGNS",
                    from_name: name,
                    discord: discord,
                    package_name: packageType,
                    package_price: packageDetails.price,
                    package_features: packageDetails.features,
                    details: details,
                    order_date: orderDate,
                    order_status: "جديد",
                    subject: `طلب تصميم جديد - باقة ${packageType}`,
                    message: `
                    تفاصيل الطلب:
                    -----------------
                    الاسم: ${name}
                    الديسكورد: ${discord}
                    الباقة: ${packageType}
                    السعر: ${packageDetails.price}
                    مميزات الباقة: ${packageDetails.features}
                    تفاصيل إضافية: ${details}
                    تاريخ الطلب: ${orderDate}
                    `
                });

                // تخزين الطلب في localStorage
                const orders = JSON.parse(localStorage.getItem('orders') || '[]');
                orders.push({
                    id: Date.now().toString(),
                    from_name: name,
                    discord: discord,

package: packageType,
                    package_price: packageDetails.price,
                    package_features: packageDetails.features,
                    details: details,
                    order_date: orderDate,
                    status: 'pending'
                });
                localStorage.setItem('orders', JSON.stringify(orders));

                alert('تم إرسال طلبك بنجاح! سيتم التواصل معك على الديسكورد');
                e.target.reset();

            } catch (error) {
                console.error('Error:', error);
                alert('حدث خطأ في إرسال الطلب. الرجاء المحاولة مرة أخرى');
            }
        });

        // إخفاء شاشة التحميل وتهيئة الصفحة
        window.addEventListener('load', () => {
            setTimeout(() => {
                document.getElementById('loadingScreen').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('loadingScreen').style.display = 'none';
                }, 500);
            }, 1500);
            checkAdminStatus();
        });
    </script>
</body>
</html>
